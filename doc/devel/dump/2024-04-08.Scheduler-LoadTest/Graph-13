#
#
#   GNUPLOT - data plot from Lumiera
#

set term wxt size 600,600


set datafile separator ",;"

####---------Data--------------------------------
$RunData << _End_of_Data_
"load size","result time","concurrency","avg jobtime","avg impeded"
153,170.946512,7.78687575678642,8700.25653594771,5.00798039215686
44,62.23816,6.27163995529431,8871.25752272727,12.1919318181818
183,203.423327,7.75858338016465,8624.4636284153,13.1594808743169
42,56.112058,6.78149748134349,9060.09,44.8326904761905
90,100.047863,7.59502188467534,8442.95232222222,7.94103333333333
135,154.629696,7.63453155207652,8744.6318,9.55625185185185
158,178.711938,7.6224815322634,8621.69903164558,19.8237848101266
107,123.18375,7.45052793895299,8577.42028971962,4.03854205607477
184,210.967189,7.53411515569845,8638.32117391305,21.1774891304348
166,187.874357,7.6084824657577,8611.07681325302,7.85254819277108
117,140.797535,7.3004006568723,8785.28561538462,63.0558461538462
178,202.060661,7.63797121301113,8670.41298876405,7.93822471910112
134,154.345701,7.52624548966219,8668.98235820895,7.90755970149254
192,211.836526,7.87293083724381,8686.32457291667,4.667359375
175,200.123106,7.57198753950981,8659.02665714286,11.2267371428571
41,48.978404,7.01731289569991,8382.84843902439,6.01575609756098
45,58.274311,6.83578161910829,8852.23253333333,76.9384888888889
151,172.980433,7.58952424983235,8694.2992781457,4.47547682119205
132,153.026385,7.55264709415962,8755.71425757576,7.99570454545455
158,178.018003,7.71592079931377,8693.49881012659,8.37062025316456
69,92.36753,6.56372200274274,8786.59114492753,68.7861014492754
124,143.783357,7.45693382997032,8646.63692741935,14.2164193548387
82,105.241708,7.11045134311199,9125.80541463415,33.7637926829268
182,201.71038,7.80215036529107,8647.11381868131,11.6857802197802
142,161.895882,7.64046158999893,8710.98076056338,17.8816971830986
180,205.45594,7.53362558415201,8599.04514444444,4.43985
92,123.926265,6.51652633120187,8777.92140217391,174.256630434783
125,145.977467,7.69331672949223,8984.407112,7.557792
148,167.747099,7.65965778043053,8681.65791891893,14.4133716216216
148,171.986958,7.59045817299705,8820.67439864864,16.6693513513514
75,102.291856,7.14353657831763,9743.0082,34.5084
102,135.271044,7.37042686681712,9774.56212745098,5.23352941176471
162,184.31177,7.60523132082123,8652.67682716049,3.55493827160494
58,72.810445,6.92005793948931,8687.11203448276,7.53760344827586
114,128.121482,7.53414729467459,8467.42207894737,14.7899736842105
52,64.053725,7.24216978793973,8920.92215384616,24.6449038461538
163,183.382431,7.67686917619715,8636.82780368098,4.41739877300614
72,84.678058,7.18322151412589,8448.07288888889,44.6918888888889
129,147.917639,7.55477410642013,8662.66937209302,2.45032558139535
146,168.145135,7.61967169612133,8775.41593150685,29.6997534246575
38,51.818695,6.66403374303425,9087.4087368421,59.5343947368421
46,58.756216,7.18251839090523,9174.29569565217,19.0596304347826
124,154.073539,7.48495967889723,9300.27602419355,21.2015
142,183.827489,7.71538247470703,9988.02385211267,4.56102816901408
38,56.228229,6.82857845300445,10104.1808684211,25.8802894736842
99,119.6339,7.33980391845455,8869.58957575758,2.46583838383838
153,174.549751,7.75248096458184,8844.40275816994,7.52324836601307
53,68.231081,6.97641758013477,8981.29269811321,23.7217924528302
50,67.754534,6.86505280960238,9302.76908,17.53768
85,108.94381,7.09744277348112,9096.73478823529,10.4850823529412
181,202.123233,7.78004533996347,8687.99954143647,8.87863535911602
89,104.348229,7.44979666113931,8734.52907865169,5.81651685393259
179,203.595589,7.701035870674,8759.20074860335,4.36360893854749
63,78.600133,7.0536965503608,8800.34106349207,26.3423492063492
72,88.062773,7.19550271259343,8800.77669444444,18.2799722222222
121,141.65176,7.5069013473606,8788.14700826446,11.9957024793388
42,54.373882,7.26977586408121,9411.56988095238,27.6116904761905
133,153.982931,7.60265251737545,8802.09562406016,1.32300751879699
46,55.878697,7.22372087523802,8775.04586956521,30.4320434782609
161,183.281008,7.6095385835067,8662.63293167702,8.46380124223603
82,101.811279,6.97652248332918,8662.05703658537,51.9063658536585
91,110.203893,7.23693537759142,8764.15881318681,34.950032967033
62,78.678888,6.95584745681713,8827.0700483871,4.51682258064516
44,59.766715,6.99746832329667,9504.90215909091,17.1681590909091
119,138.043866,7.48610716248703,8684.12751260504,1.31360504201681
146,163.142201,7.69377247766812,8597.11627397261,16.3477876712329
65,80.939635,7.10862072703935,8851.83333846153,2.93209230769231
82,99.235561,7.24491740415515,8767.72491463414,2.91723170731707
188,213.363011,7.70100523656371,8739.94502659574,3.68948404255319
164,185.166253,7.76932021192868,8772.04824390244,5.72121341463415
198,223.197176,7.71031646923704,8691.51950505051,1.21380303030303
196,220.192503,7.69108110824282,8640.4,0.430612244897959
180,206.330767,7.6558709685793,8775.78738333333,10.3256
123,144.721694,7.31167694872339,8602.91279674797,16.6400650406504
138,160.709094,7.55113937733978,8793.74469565217,25.4078550724638
188,209.142032,7.85878765393271,8742.56818617022,1.85203191489362
192,219.726544,7.6175970892256,8717.64730208333,8.65040625
91,106.028299,7.41373312043797,8638.08254945055,10.6057692307692
200,228.362229,7.53655624897583,8605.32391999999,55.18684
30,44.530553,6.37356549333667,9460.6132,39.0685333333333

_End_of_Data_


#
#---common-styles-for-plots-from-Lumiera---------
set style line 1 linetype  1 linewidth 2 linecolor rgb '#240CC3'
set style line 2 linetype  3 linewidth 2 linecolor rgb '#1149D6'
set style line 3 linetype  2 linewidth 2 linecolor rgb '#0B7FCC'
set style line 4 linetype  6 linewidth 2 linecolor rgb '#37999D'
set style line 5 linetype  7 linewidth 2 linecolor rgb '#248269'
set style line 6 linetype 13 linewidth 2 linecolor rgb '#00C443'
set style line 7 linetype 12 linewidth 2 linecolor rgb '#EBE83E'
set style line 8 linetype  5 linewidth 2 linecolor rgb '#762C14'
set style line 9 linetype  4 linewidth 2 linecolor rgb '#AA0519'

set style line 10 linetype 1 linewidth 1 linecolor rgb '#303030'
set style line 11 linetype 0 linewidth 1 linecolor rgb '#A0A0A0' dashtype 3
#---(End)styles----------------------------------

#
#---axis-and-grid-setup--------------------------
unset border
set tics nomirror
set grid back linestyle 11

set arrow 10 from graph 0,0 to graph 1.04,0 size screen 0.025,15,60 filled ls 10
set arrow 11 from graph 0,0 to graph 0,1.08 size screen 0.025,15,60 filled ls 10


set xlabel 'load size ⟶ number of jobs'
set ylabel 'active time ⟶ ms' offset 2
set key autotitle columnheader tmargin

#
stats $RunData using 1:2 nooutput

# regression line function derived from data
regLine(x) = STATS_slope * x + STATS_intercept
#
regLabel = sprintf("Model: %3.2f·p + %3.2f", STATS_slope, STATS_intercept)

set key horizontal width -4
set xtics 10

plots = STATS_columns - 1
# Adjust layout based on number of data sequences;
# additional sequences placed into secondary diagram
#
if (plots > 1) {
    set multiplot layout 2,1     # 2 rows 1 column
    set lmargin at screen 0.12   # fixed margins to align diagrams
    set rmargin at screen 0.88
}
#
#
####---------Scatter-Regression-Plot-------------
plot $RunData using 1:2 with points linestyle 1, \
     regLine(x)         with line   linestyle 9 title regLabel

if (plots > 1) {
    # switch off decorations for secondary diagram
    unset arrow 10
    unset arrow 11
    set border 2+8
    set key bmargin vertical

    unset xlabel
    set format x ""
    set ylabel 'concurrent threads ⟶' 
    if (plots <= 2) {
        ####---------------------------------
        plot $RunData using 1:3 with impulses linestyle 3

    } else {
        # more than one additional data sequence
        #
        set y2tics
        set y2label 'avg job time ⟶ µs'  offset -2.6

        ####---------------------------------------------
        plot             $RunData using 1:3 with impulses linestyle 3, \
             for [i=4:*] $RunData using 1:i with points   linestyle 5+(i-4) axes x1y2
    }
}

